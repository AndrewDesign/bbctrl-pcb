Version 4
SHEET 1 2444 1624
WIRE -1408 -176 -1488 -176
WIRE -1264 -176 -1312 -176
WIRE -1184 -176 -1264 -176
WIRE -1104 -176 -1184 -176
WIRE -992 -176 -1104 -176
WIRE -816 -176 -912 -176
WIRE -368 -176 -816 -176
WIRE 48 -176 -368 -176
WIRE 112 -176 48 -176
WIRE 192 -176 112 -176
WIRE 256 -176 192 -176
WIRE 416 -176 352 -176
WIRE 928 -176 416 -176
WIRE 1040 -176 928 -176
WIRE 1216 -176 1040 -176
WIRE 1280 -176 1216 -176
WIRE 1440 -176 1280 -176
WIRE 1536 -176 1440 -176
WIRE 1888 -176 1536 -176
WIRE 2080 -176 1888 -176
WIRE 2176 -176 2080 -176
WIRE -1184 -160 -1184 -176
WIRE 1216 -144 1216 -176
WIRE -368 -128 -368 -176
WIRE 2176 -128 2176 -176
WIRE -1104 -112 -1104 -176
WIRE 192 -112 192 -176
WIRE 416 -112 416 -176
WIRE 432 -112 416 -112
WIRE 528 -112 512 -112
WIRE 576 -112 528 -112
WIRE 656 -112 576 -112
WIRE 784 -112 656 -112
WIRE 928 -112 928 -176
WIRE 1280 -112 1280 -176
WIRE -1264 -96 -1264 -176
WIRE 112 -96 112 -176
WIRE 1888 -80 1888 -176
WIRE 2080 -80 2080 -96
WIRE 2112 -80 2080 -80
WIRE 656 -64 656 -112
WIRE 1536 -64 1536 -96
WIRE 1648 -64 1536 -64
WIRE 1744 -64 1648 -64
WIRE 1840 -64 1744 -64
WIRE 48 -48 48 -176
WIRE 1040 -48 1040 -176
WIRE 1744 -48 1744 -64
WIRE 1968 -48 1952 -48
WIRE 2080 -48 2080 -80
WIRE 2080 -48 2048 -48
WIRE -1664 -32 -1664 -64
WIRE -496 -32 -496 -48
WIRE 992 -32 976 -32
WIRE 1440 -32 1440 -176
WIRE 1536 -32 1536 -64
WIRE 1840 -32 1824 -32
WIRE 2192 -32 2176 -32
WIRE 2240 -32 2192 -32
WIRE -1712 -16 -1808 -16
WIRE -928 -16 -928 -32
WIRE -544 -16 -656 -16
WIRE 1120 -16 1104 -16
WIRE 1216 -16 1216 -64
WIRE 1216 -16 1200 -16
WIRE 1280 -16 1280 -48
WIRE 1280 -16 1216 -16
WIRE 1360 -16 1280 -16
WIRE 1392 -16 1360 -16
WIRE 2192 -16 2192 -32
WIRE -1328 0 -1328 -128
WIRE -1264 0 -1264 -32
WIRE -1264 0 -1328 0
WIRE -1104 0 -1104 -32
WIRE -976 0 -1104 0
WIRE -368 0 -368 -48
WIRE -368 0 -432 0
WIRE -256 0 -368 0
WIRE -128 0 -256 0
WIRE -112 0 -128 0
WIRE -16 0 -32 0
WIRE 928 0 928 -32
WIRE 992 0 928 0
WIRE -1808 16 -1808 -16
WIRE -784 16 -864 16
WIRE -624 16 -784 16
WIRE -544 16 -624 16
WIRE 416 16 416 -112
WIRE 576 16 576 -112
WIRE 928 16 928 0
WIRE 1888 16 1888 -16
WIRE -1712 32 -1744 32
WIRE -1488 32 -1488 -176
WIRE -976 32 -1056 32
WIRE 784 32 784 -112
WIRE 1632 32 1616 32
WIRE 1744 32 1744 16
WIRE 1744 32 1712 32
WIRE 1824 32 1824 -32
WIRE 1824 32 1744 32
WIRE -624 48 -624 16
WIRE -496 48 -496 32
WIRE 112 48 112 -32
WIRE 112 48 48 48
WIRE 192 48 192 -32
WIRE 192 48 112 48
WIRE 272 48 272 -128
WIRE 272 48 192 48
WIRE 656 48 656 0
WIRE 704 48 656 48
WIRE 736 48 704 48
WIRE 1040 48 1040 16
WIRE -928 64 -928 48
WIRE 528 64 528 -112
WIRE 528 64 480 64
WIRE 1536 64 1536 48
WIRE -1744 96 -1744 32
WIRE -1744 96 -1808 96
WIRE -1664 96 -1664 48
WIRE -1056 96 -1056 32
WIRE -816 96 -816 -176
WIRE -816 96 -1056 96
WIRE -720 96 -720 80
WIRE -368 96 -368 80
WIRE -1744 112 -1744 96
WIRE -128 112 -128 0
WIRE 928 112 928 96
WIRE -1104 144 -1104 0
WIRE -976 144 -1104 144
WIRE -784 144 -784 16
WIRE -784 144 -896 144
WIRE 416 144 416 112
WIRE 576 144 576 80
WIRE 576 144 416 144
WIRE 656 144 656 48
WIRE 656 144 576 144
WIRE 784 144 784 128
WIRE 1440 144 1440 64
WIRE 1440 144 784 144
WIRE 1472 144 1440 144
WIRE 1648 144 1472 144
WIRE 1744 144 1648 144
WIRE 1808 144 1744 144
WIRE 1952 144 1888 144
WIRE -1328 160 -1328 0
WIRE -656 160 -656 -16
WIRE -656 160 -720 160
WIRE -624 160 -624 112
WIRE -624 160 -656 160
WIRE -544 160 -624 160
WIRE -432 160 -464 160
WIRE -416 160 -432 160
WIRE -304 160 -320 160
WIRE -208 160 -224 160
WIRE -192 160 -208 160
WIRE 656 160 656 144
WIRE 1744 160 1744 144
WIRE 2080 160 2000 160
WIRE 2224 160 2144 160
WIRE -720 176 -720 160
WIRE -432 176 -432 160
WIRE -208 176 -208 160
WIRE 1648 176 1648 144
WIRE 2224 176 2224 160
WIRE -1664 192 -1664 176
WIRE 2032 208 2000 208
WIRE -1488 272 -1488 112
WIRE -1328 272 -1328 240
WIRE -1328 272 -1488 272
WIRE -720 272 -720 256
WIRE -720 272 -1328 272
WIRE -432 272 -432 240
WIRE -432 272 -720 272
WIRE -208 272 -208 256
WIRE -208 272 -432 272
WIRE -128 272 -128 208
WIRE -128 272 -208 272
WIRE 656 272 656 240
WIRE 656 272 -128 272
WIRE 1648 272 1648 240
WIRE 1648 272 656 272
WIRE 1744 272 1744 240
WIRE 1744 272 1648 272
WIRE 1952 272 1952 224
WIRE 1952 272 1744 272
WIRE 2032 272 2032 208
WIRE 2032 272 1952 272
WIRE 2224 272 2224 256
WIRE 2224 272 2032 272
WIRE -1488 304 -1488 272
FLAG -1488 304 0
FLAG 1472 144 Vs
FLAG 1040 48 0
FLAG 928 112 0
FLAG 976 -32 Vs
FLAG -1184 -160 Vin
FLAG 1360 -16 gate2
FLAG -1744 112 0
FLAG -1664 -64 sw
FLAG 192 48 sw
FLAG 704 48 gate1
FLAG -1664 192 0
FLAG 928 0 comp
FLAG 1536 64 0
FLAG 2240 -32 good
FLAG 1888 16 0
FLAG 1616 32 gate2
FLAG 2192 64 0
FLAG 2192 144 good
FLAG 1648 -64 pgthresh
FLAG -928 -32 Vin
FLAG -928 64 0
FLAG -720 80 Vin
FLAG -496 48 0
FLAG -496 -48 Vin
FLAG -256 0 trip
SYMBOL voltage -1488 16 R0
WINDOW 3 10 12 Left 2
WINDOW 0 -32 10 Left 2
WINDOW 123 0 0 Left 2
SYMATTR Value 28
SYMATTR InstName V1
SYMATTR SpiceLine Rser=1m Cpar=1p
SYMBOL res -1344 144 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMATTR SpiceLine tol=1 pwr=.125
SYMBOL polcap 1632 176 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 2000µ
SYMATTR InstName CL
SYMATTR SpiceLine V=35 Irms=3.67 Rser=0.03 Lser=0
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 1728 144 R0
SYMATTR InstName RL
SYMATTR Value 150
SYMBOL zener -1248 -32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D1
SYMATTR Value BZX84C12L
SYMBOL pmos -1408 -128 R270
WINDOW 0 -4 -13 VRight 2
WINDOW 3 -2 57 Right 2
SYMATTR InstName U1
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR Prefix X
SYMBOL pmos 1392 64 M180
WINDOW 3 70 196 VLeft 2
WINDOW 0 5 107 Left 2
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR InstName U2
SYMATTR Prefix X
SYMBOL res 528 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 38 55 VTop 2
SYMATTR InstName R2
SYMATTR Value 3
SYMBOL pnp 480 112 R180
WINDOW 0 9 113 Left 2
WINDOW 3 26 47 Left 2
SYMATTR InstName Q1
SYMBOL res 640 144 R0
SYMATTR InstName R9
SYMATTR Value 4.7K
SYMBOL pmos 736 128 M180
WINDOW 0 -5 42 Right 2
WINDOW 3 66 -8 VRight 2
SYMATTR InstName U3
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR Prefix X
SYMBOL voltage -1808 0 R0
WINDOW 3 -138 -51 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 1 1U 1U 6 8)
SYMATTR InstName V2
SYMBOL sw -1664 64 M180
WINDOW 0 -51 3 Left 2
WINDOW 3 -112 109 Left 2
SYMATTR InstName S2
SYMATTR Value SWITCH
SYMBOL LM293 1040 0 R0
WINDOW 0 35 -49 Bottom 2
WINDOW 3 57 9 Top 2
SYMATTR InstName U4
SYMBOL res 912 -128 R0
WINDOW 0 -27 28 Left 2
WINDOW 3 -25 65 Left 2
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL res 944 112 R180
WINDOW 0 42 73 Left 2
WINDOW 3 44 39 Left 2
SYMATTR InstName R4
SYMATTR Value 60k
SYMBOL res 1200 -160 R0
WINDOW 0 -36 43 Left 2
WINDOW 3 -45 71 Left 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 1216 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res -1680 80 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL voltage 2224 160 M0
WINDOW 3 -138 -51 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 3 1U 1U 0.25 0.5 5)
SYMATTR InstName V3
SYMBOL sw 1952 240 R180
WINDOW 0 -51 3 Left 2
WINDOW 3 -112 109 Left 2
SYMATTR InstName S1
SYMATTR Value SWITCH
SYMBOL res 1904 128 R90
WINDOW 0 59 74 VBottom 2
WINDOW 3 37 32 VTop 2
SYMATTR InstName R13
SYMATTR Value 1
SYMBOL zener 592 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D2
SYMATTR Value BZX84C12L
SYMBOL LM293 1888 -32 R0
WINDOW 0 35 -49 Bottom 2
WINDOW 3 57 9 Top 2
SYMATTR InstName U5
SYMBOL res 1552 -80 R180
WINDOW 0 -33 78 Left 2
WINDOW 3 -44 44 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 1552 64 R180
WINDOW 0 -43 102 Left 2
WINDOW 3 -42 65 Left 2
SYMATTR InstName R11
SYMATTR Value 40k
SYMBOL pnp 2112 -32 M180
WINDOW 0 16 105 Left 2
WINDOW 3 30 46 Left 2
SYMATTR InstName Q4
SYMBOL res 2064 -64 R90
WINDOW 0 -1 75 VBottom 2
WINDOW 3 -30 29 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res 2064 -192 R0
WINDOW 0 -37 32 Left 2
WINDOW 3 -36 62 Left 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 2176 -32 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1728 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1meg
SYMBOL cap 1728 -48 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL Digital\\and 2112 112 M0
WINDOW 3 -59 121 Left 2
SYMATTR Value Ref=1.5
SYMATTR InstName A1
SYMATTR Value2 Vhigh=5 Vlow=0
SYMATTR SpiceLine Td=2n  Trise=10n Tfall=10n
SYMATTR SpiceLine2 tripdt=5n
SYMBOL res -896 -192 R90
WINDOW 0 61 80 VBottom 2
WINDOW 3 34 11 VTop 2
SYMATTR InstName Rsense
SYMATTR Value 5m
SYMBOL pmos 352 -128 M270
WINDOW 0 30 -23 VRight 2
WINDOW 3 -231 35 Left 2
SYMATTR InstName U6
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR Prefix X
SYMBOL res 176 -128 R0
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL cap 640 -64 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL zener 128 -32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D3
SYMATTR Value BZX84C12L
SYMBOL res -1120 -128 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -880 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 402k
SYMBOL zener -704 160 R180
WINDOW 0 -21 64 Left 2
WINDOW 3 53 -24 VRight 2
SYMATTR InstName D4
SYMATTR Value EDZV6_2B
SYMBOL res -736 160 R0
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL LM293 -496 16 R0
WINDOW 0 35 -49 Bottom 2
WINDOW 3 57 9 Top 2
SYMATTR InstName U8
SYMBOL res -384 -144 R0
WINDOW 0 -37 32 Left 2
WINDOW 3 -36 62 Left 2
SYMATTR InstName R21
SYMATTR Value 4.7k
SYMBOL npn -192 112 R0
SYMATTR InstName Q2
SYMBOL pnp -320 96 R90
WINDOW 0 -2 61 VRight 2
WINDOW 3 56 22 VRight 2
SYMATTR InstName Q3
SYMBOL res -208 144 R90
WINDOW 0 1 84 VBottom 2
WINDOW 3 -25 34 VTop 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL cap -448 176 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res -384 -16 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL pnp -16 48 M180
WINDOW 0 24 109 Left 2
WINDOW 3 37 51 Left 2
SYMATTR InstName Q5
SYMBOL res -16 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 10k
SYMBOL res -448 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res -224 160 R0
WINDOW 0 -47 46 Left 2
WINDOW 3 -44 81 Left 2
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL zener 1296 -48 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D5
SYMATTR Value BZX84C12L
SYMBOL LM2904 -928 32 R0
WINDOW 0 52 39 Bottom 2
WINDOW 3 47 -129 Top 2
SYMATTR InstName U7
SYMBOL cap -640 48 R0
WINDOW 0 30 16 Left 2
WINDOW 3 24 60 Left 2
SYMATTR InstName C4
SYMATTR Value 1n
TEXT -1320 312 Left 2 !.tran 0 10 0 startup
TEXT -976 312 Left 2 !.lib OptiMOS-P2_40V.lib
TEXT -520 312 Left 2 !.model SWITCH SW(ROn=.01 Roff=100Meg Vt=3 Vh=0)
TEXT 408 -216 Left 3 ;Current limited cap charge
TEXT -1296 -256 Center 3 ;Reverse voltage\nprotection
TEXT 1776 -216 Left 3 ;Power good
TEXT 1760 312 Left 3 ;Simulated load
TEXT 944 -216 Left 3 ;Charge detect and enable
TEXT 1672 344 Left 2 ;(Connect R13 to enable fast pulsed load)
TEXT -1712 -176 Center 3 ;Simulated\non/off switch
TEXT -592 -224 Left 3 ;Overcurrent protection
RECTANGLE Normal 2304 96 1504 -192 2
RECTANGLE Normal 832 288 400 -192 2
RECTANGLE Normal 1488 288 848 -192 2
RECTANGLE Normal 2304 112 1504 288 2
RECTANGLE Normal -1440 288 -1152 -192 2
RECTANGLE Normal -1568 224 -1856 -112 2
RECTANGLE Normal 384 288 -1136 -192 2

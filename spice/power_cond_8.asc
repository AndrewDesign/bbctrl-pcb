Version 4
SHEET 1 2268 1624
WIRE -1408 -176 -1488 -176
WIRE -1264 -176 -1312 -176
WIRE -1184 -176 -1264 -176
WIRE -1120 -176 -1184 -176
WIRE -432 -176 -1120 -176
WIRE -320 -176 -432 -176
WIRE -112 -176 -320 -176
WIRE 128 -176 -112 -176
WIRE 176 -176 128 -176
WIRE 304 -176 176 -176
WIRE 496 -176 304 -176
WIRE 848 -176 496 -176
WIRE 1040 -176 848 -176
WIRE 1136 -176 1040 -176
WIRE -1184 -160 -1184 -176
WIRE -112 -144 -112 -176
WIRE 128 -144 128 -176
WIRE 176 -128 176 -176
WIRE 1136 -128 1136 -176
WIRE -1120 -112 -1120 -176
WIRE -1104 -112 -1120 -112
WIRE -1008 -112 -1024 -112
WIRE -960 -112 -1008 -112
WIRE -704 -112 -960 -112
WIRE -576 -112 -704 -112
WIRE -432 -112 -432 -176
WIRE -1264 -96 -1264 -176
WIRE -32 -96 -48 -96
WIRE 64 -96 48 -96
WIRE -704 -80 -704 -112
WIRE 848 -80 848 -176
WIRE 1040 -80 1040 -96
WIRE 1072 -80 1040 -80
WIRE 496 -64 496 -96
WIRE 704 -64 496 -64
WIRE 800 -64 704 -64
WIRE -320 -48 -320 -176
WIRE 704 -48 704 -64
WIRE 928 -48 912 -48
WIRE 1040 -48 1040 -80
WIRE 1040 -48 1008 -48
WIRE -1664 -32 -1664 -64
WIRE -864 -32 -880 -32
WIRE -768 -32 -784 -32
WIRE -368 -32 -384 -32
WIRE 304 -32 304 -176
WIRE 496 -32 496 -64
WIRE 800 -32 784 -32
WIRE 1152 -32 1136 -32
WIRE 1200 -32 1152 -32
WIRE -1712 -16 -1808 -16
WIRE -224 -16 -256 -16
WIRE -112 -16 -112 -64
WIRE -112 -16 -144 -16
WIRE 128 -16 128 -48
WIRE 128 -16 -112 -16
WIRE 176 -16 176 -64
WIRE 176 -16 128 -16
WIRE 224 -16 176 -16
WIRE 256 -16 224 -16
WIRE 1152 -16 1152 -32
WIRE -1328 0 -1328 -128
WIRE -1264 0 -1264 -32
WIRE -1264 0 -1328 0
WIRE -432 0 -432 -32
WIRE -368 0 -432 0
WIRE -1808 16 -1808 -16
WIRE -1120 16 -1120 -112
WIRE -960 16 -960 -112
WIRE -432 16 -432 0
WIRE 848 16 848 -16
WIRE -1712 32 -1744 32
WIRE -1488 32 -1488 -176
WIRE -576 32 -576 -112
WIRE 592 32 576 32
WIRE 704 32 704 16
WIRE 704 32 672 32
WIRE 784 32 784 -32
WIRE 784 32 704 32
WIRE -704 48 -704 16
WIRE -656 48 -704 48
WIRE -624 48 -656 48
WIRE -320 48 -320 16
WIRE -1008 64 -1008 -112
WIRE -1008 64 -1056 64
WIRE 496 64 496 48
WIRE -1664 80 -1664 48
WIRE -1616 80 -1664 80
WIRE -1744 96 -1744 32
WIRE -1744 96 -1808 96
WIRE -1664 96 -1664 80
WIRE -1744 112 -1744 96
WIRE -432 112 -432 96
WIRE -1120 144 -1120 112
WIRE -960 144 -960 80
WIRE -960 144 -1120 144
WIRE -704 144 -704 48
WIRE -704 144 -960 144
WIRE -576 144 -576 128
WIRE 304 144 304 64
WIRE 304 144 -576 144
WIRE 320 144 304 144
WIRE 496 144 400 144
WIRE 608 144 496 144
WIRE 704 144 608 144
WIRE 768 144 704 144
WIRE 1152 144 1104 144
WIRE -1328 160 -1328 0
WIRE -704 160 -704 144
WIRE 704 160 704 144
WIRE 1040 160 960 160
WIRE 1184 160 1104 160
WIRE 608 176 608 144
WIRE 1184 176 1184 160
WIRE -1664 192 -1664 176
WIRE 992 208 960 208
WIRE -1488 272 -1488 112
WIRE -1328 272 -1328 240
WIRE -1328 272 -1488 272
WIRE -704 272 -704 240
WIRE -704 272 -1328 272
WIRE 608 272 608 240
WIRE 608 272 -704 272
WIRE 704 272 704 240
WIRE 704 272 608 272
WIRE 912 272 912 224
WIRE 912 272 704 272
WIRE 992 272 992 208
WIRE 992 272 912 272
WIRE 1184 272 1184 256
WIRE 1184 272 992 272
WIRE -1488 304 -1488 272
FLAG -1488 304 0
FLAG 496 144 Vs
FLAG -320 48 0
FLAG -432 112 0
FLAG -384 -32 Vs
FLAG -1184 -160 Vin
FLAG 224 -16 gate2
FLAG -1744 112 0
FLAG -1616 80 sw
FLAG -48 -96 sw
FLAG -880 -32 sw
FLAG -656 48 gate1
FLAG -1664 -64 Vin
FLAG -1664 192 0
FLAG -432 0 comp
FLAG 496 64 0
FLAG 1200 -32 good
FLAG 848 16 0
FLAG 576 32 gate2
FLAG 1152 64 0
FLAG 1152 144 good
SYMBOL voltage -1488 16 R0
WINDOW 3 10 12 Left 2
WINDOW 0 -32 10 Left 2
SYMATTR Value 28
SYMATTR SpiceLine Rser=.02
SYMATTR InstName V1
SYMBOL res -1344 144 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=.125
SYMBOL polcap 592 176 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 2000µ
SYMATTR InstName CL
SYMATTR SpiceLine V=35 Irms=3.67 Rser=0.03 Lser=0
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 688 144 R0
SYMATTR InstName RL
SYMATTR Value 150
SYMBOL zener -1248 -32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D1
SYMATTR Value BZX84C12L
SYMBOL pmos -1408 -128 R270
WINDOW 0 -4 -13 VRight 2
WINDOW 3 -2 57 Right 2
SYMATTR InstName U1
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR Prefix X
SYMBOL pmos 256 64 M180
WINDOW 3 68 163 VLeft 2
WINDOW 0 5 107 Left 2
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR InstName U2
SYMATTR Prefix X
SYMBOL res -1008 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 38 55 VTop 2
SYMATTR InstName R2
SYMATTR Value 3
SYMBOL pnp -1056 112 R180
WINDOW 0 9 113 Left 2
WINDOW 3 26 47 Left 2
SYMATTR InstName Q1
SYMBOL res -720 144 R0
SYMATTR InstName R9
SYMATTR Value 4.7K
SYMBOL pmos -624 128 M180
WINDOW 0 -5 42 Right 2
WINDOW 3 66 -8 VRight 2
SYMATTR InstName U3
SYMATTR Value IPD90P04P4L-04_L0
SYMATTR Prefix X
SYMBOL voltage -1808 0 R0
WINDOW 3 -138 -51 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 1 1U 1U 6 8)
SYMATTR InstName V2
SYMBOL sw -1664 64 M180
WINDOW 0 -51 3 Left 2
WINDOW 3 -112 109 Left 2
SYMATTR InstName S2
SYMATTR Value SWITCH
SYMBOL LM293 -320 0 R0
WINDOW 0 35 -49 Bottom 2
WINDOW 3 57 9 Top 2
SYMATTR InstName U4
SYMBOL res -448 -128 R0
WINDOW 0 -27 28 Left 2
WINDOW 3 -25 65 Left 2
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL res -416 112 R180
WINDOW 0 42 73 Left 2
WINDOW 3 44 39 Left 2
SYMATTR InstName R4
SYMATTR Value 60k
SYMBOL res -128 -160 R0
WINDOW 0 -36 43 Left 2
WINDOW 3 -66 73 Left 2
SYMATTR InstName R7
SYMATTR Value 1meg
SYMBOL res -128 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1meg
SYMBOL pnp 64 -48 M180
WINDOW 0 12 107 Left 2
WINDOW 3 30 46 Left 2
SYMATTR InstName Q2
SYMBOL res -1680 80 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL pnp -768 16 M180
WINDOW 0 62 38 Left 2
WINDOW 3 54 66 Left 2
SYMATTR InstName Q3
SYMBOL res 64 -112 R90
WINDOW 0 -1 75 VBottom 2
WINDOW 3 -30 29 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -768 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL voltage 1184 160 M0
WINDOW 3 -138 -51 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 3 1U 1U 0.001 0.002 50)
SYMATTR InstName V3
SYMBOL sw 912 240 R180
WINDOW 0 -51 3 Left 2
WINDOW 3 -112 109 Left 2
SYMATTR InstName S1
SYMATTR Value SWITCH
SYMBOL res 864 128 R90
WINDOW 0 59 74 VBottom 2
WINDOW 3 37 32 VTop 2
SYMATTR InstName R13
SYMATTR Value 1
SYMBOL cap 160 -128 R0
SYMATTR InstName C1
SYMATTR Value 470n
SYMBOL zener -944 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -22 -16 VRight 2
SYMATTR InstName D2
SYMATTR Value BZX84C12L
SYMBOL LM293 848 -32 R0
WINDOW 0 35 -49 Bottom 2
WINDOW 3 57 9 Top 2
SYMATTR InstName U5
SYMBOL res 512 -80 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 512 64 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 40k
SYMBOL pnp 1072 -32 M180
WINDOW 0 16 105 Left 2
WINDOW 3 30 46 Left 2
SYMATTR InstName Q4
SYMBOL res 1024 -64 R90
WINDOW 0 -1 75 VBottom 2
WINDOW 3 -30 29 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res 1024 -192 R0
WINDOW 0 -37 32 Left 2
WINDOW 3 -36 62 Left 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1136 -32 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 688 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL cap 688 -48 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL Digital\\and 1072 112 M0
WINDOW 3 -59 121 Left 2
SYMATTR InstName A1
SYMATTR Value Ref=1.5
SYMATTR Value2 Vhigh=5 Vlow=0
SYMATTR SpiceLine Td=2n  Trise=10n Tfall=10n
SYMATTR SpiceLine2 tripdt=5n
SYMBOL res 416 128 R90
WINDOW 0 65 107 VBottom 2
WINDOW 3 37 43 VTop 2
SYMATTR InstName Rsense
SYMATTR Value 5m
TEXT -1320 312 Left 2 !.tran 0 10 0 startup
TEXT -1056 312 Left 2 !.lib OptiMOS-P2_40V.lib
TEXT -736 312 Left 2 !.model SWITCH SW(ROn=.01 Roff=100Meg Vt=3 Vh=0)
TEXT -1048 -216 Left 3 ;Current limited cap charge
TEXT -1304 -256 Center 3 ;Reverse voltage\nprotection
TEXT 736 -216 Left 3 ;Power good
TEXT 728 312 Left 3 ;Simulated load
TEXT -304 -216 Left 3 ;Detect charge and switch on
TEXT 640 344 Left 2 ;(Connect R13 to enable fast pulsed load)
TEXT -1712 -176 Center 3 ;Simulated\non/off switch
RECTANGLE Normal 1264 96 432 -192 2
RECTANGLE Normal -528 288 -1136 -192 2
RECTANGLE Normal 416 288 -512 -192 2
RECTANGLE Normal 1264 112 432 288 2
RECTANGLE Normal -1440 288 -1152 -192 2
RECTANGLE Normal -1568 224 -1856 -112 2
